<div class="py-10">
  <h1 class="text-2xl font-bold mb-6 text-gray-100">Tu carrito</h1>

<% if @cart.cart_items.any? %>
  <div class="w-full overflow-hidden rounded-2xl shadow-lg border border-gray-800 bg-gray-900/50">
    
    <!-- Encabezados -->
    <div class="grid grid-cols-5 px-4 py-3 text-sm font-semibold text-gray-400 border-b border-gray-800">
      <div>Product</div>
      <div>Price</div>
      <div>Quantity</div>
      <div>Subtotal</div>
      <div></div>
      <div></div>
    </div>

    <!-- Items -->
    <% @cart.cart_items.each do |item| %>
      <div class="grid grid-cols-5 items-center px-4 py-4 text-sm border-b border-gray-800 hover:bg-gray-800/40 transition">
        <div class="font-medium text-gray-200"><%= item.product.name %></div>
        <div class="text-gray-300"><%= number_to_currency(item.unit_price) %></div>
      <div class="flex items-center space-x-2">
        <%= form_with model: item, url: cart_item_path(item), method: :put, local: true, class: "flex items-center space-x-2" do |f| %>
          <%= f.number_field :quantity, value: item.quantity, min: 1,
                class: "w-16 rounded-lg bg-gray-800 border border-gray-700 text-gray-200 px-2 py-1 text-center",
                onchange: "this.form.submit();" %>
        <% end %>
      </div>


        <div class="text-gray-300 font-medium"><%= number_to_currency(item.subtotal) %></div>
        
        <div>
          <%= button_to "Remove", cart_item_path(item), method: :delete, 
                data: { confirm: "¿Remove este producto?" },
                class: "px-3 py-1 rounded-lg bg-red-700 hover:bg-red-700 text-white text-xs font-medium" %>
        </div>
      </div>
    <% end %>

    <!-- Total -->
    <div class="grid grid-cols-5 px-4 py-4 font-semibold text-gray-200">
      <div class="col-span-3 text-right">Total:&nbsp;</div>
      <div><%= number_to_currency(@cart.total) %></div>
      <div></div>
    </div>
  </div>

  <!-- Checkout -->
<div class="mt-6 flex justify-end">
  <%= link_to "Checkout", "#", 
        class: "checkout-btn px-6 py-3 rounded-2xl bg-purple-600 hover:bg-purple-700 text-white font-semibold shadow-lg transition" %>
</div>

<!-- Mensaje oculto -->
<div id="flash-message" class=" text-2xl hidden my-20 bg-gray-800 text-center text-white px-20 py-10 rounded-lg shadow-lg transition-all duration-500">
  Not available at this time
</div>


<% else %>
  <div class="text-center py-20">
    <p class="text-gray-400 mb-4">Tu carrito está vacío.</p>
    <%= link_to "Ver productos", products_path, 
          class: "px-5 py-2 rounded-xl bg-purple-600 hover:bg-purple-700 text-white font-medium shadow-md" %>
  </div>
<% end %>

</div>